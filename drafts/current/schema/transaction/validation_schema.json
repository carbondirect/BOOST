{
  "schema": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://github.com/carbondirect/BOOST/schemas/transaction",
    "type": "object",
    "properties": {
      "@context": {
        "type": "object"
      },
      "@type": {
        "type": "string",
        "enum": [
          "Transaction"
        ]
      },
      "@id": {
        "type": "string",
        "format": "uri"
      },
      "transactionId": {
        "type": "string",
        "description": "Unique identifier for the business transaction"
      },
      "OrganizationId": {
        "type": "string",
        "description": "Primary organization involved in transaction (seller/supplier)"
      },
      "CustomerId": {
        "type": "string", 
        "description": "Customer organization (buyer) - uses EntityNameId convention referencing Customer entity"
      },
      "transactionDate": {
        "type": "string",
        "format": "date",
        "description": "Date of business agreement"
      },
      "SalesDeliveryDocumentId": {
        "type": "string",
        "description": "Foreign key to sales/delivery documentation - uses EntityNameId convention referencing SalesDeliveryDocument"
      },
      "contractValue": {
        "type": "number",
        "minimum": 0,
        "description": "Total monetary value of the transaction"
      },
      "contractCurrency": {
        "type": "string",
        "enum": [
          "USD",
          "EUR",
          "GBP",
          "CAD",
          "JPY",
          "AUD",
          "CHF",
          "SEK",
          "NOK"
        ],
        "description": "Currency code for contract value"
      },
      "contractTerms": {
        "type": "string",
        "enum": [
          "FOB",
          "CIF",
          "DDP",
          "EXW",
          "FCA",
          "CPT",
          "DAP",
          "FAS"
        ],
        "description": "Incoterms delivery conditions"
      },
      "paymentTerms": {
        "type": "string",
        "description": "Payment conditions and timeline"
      },
      "transactionStatus": {
        "type": "string",
        "enum": [
          "pending",
          "confirmed",
          "delivered",
          "completed",
          "cancelled",
          "disputed"
        ],
        "description": "Current status of business transaction"
      },
      "GeographicDataId": {
        "type": "string",
        "description": "Primary transaction location - uses EntityNameId convention referencing GeographicData"
      },
      "BrokerOrganizationId": {
        "type": [
          "string",
          "null"
        ],
        "description": "Optional intermediary broker organization - uses EntityNameId convention referencing Organization"
      },
      "contractSignedDate": {
        "type": [
          "string",
          "null"
        ],
        "format": "date",
        "description": "Date when contract was executed"
      },
      "expectedDeliveryDate": {
        "type": [
          "string",
          "null"
        ],
        "format": "date",
        "description": "Expected completion/delivery date"
      },
      "complianceRequirements": {
        "type": "array",
        "items": {
          "type": "string",
          "enum": [
            "FSC_Chain_of_Custody",
            "SBP_DTS_Registration",
            "PEFC_Certification",
            "RSB_Compliance",
            "LCFS_Reporting",
            "RFS_Reporting",
            "EU_RED_Compliance"
          ]
        },
        "description": "Regulatory compliance requirements for transaction"
      },
      "financialTerms": {
        "type": "object",
        "properties": {
          "downPaymentAmount": {
            "type": "number",
            "minimum": 0
          },
          "downPaymentPercentage": {
            "type": "number",
            "minimum": 0,
            "maximum": 100
          },
          "retentionAmount": {
            "type": "number",
            "minimum": 0
          },
          "lateFeePercentage": {
            "type": "number",
            "minimum": 0
          },
          "discountTerms": {
            "type": "string"
          },
          "creditLimit": {
            "type": "number",
            "minimum": 0
          },
          "collateralRequired": {
            "type": "boolean"
          }
        },
        "description": "Detailed financial terms and conditions"
      },
      "riskManagement": {
        "type": "object",
        "properties": {
          "forceMarjeureClause": {
            "type": "boolean"
          },
          "qualityGuarantees": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "deliveryPenalties": {
            "type": "string"
          },
          "insuranceRequirements": {
            "type": "string"
          },
          "disputeResolutionMethod": {
            "type": "string",
            "enum": [
              "arbitration",
              "mediation",
              "litigation",
              "negotiation"
            ]
          }
        },
        "description": "Risk management and mitigation terms"
      },
      "LcfsPathwayId": {
        "type": "string",
        "description": "CARB-certified pathway identifier for LCFS compliance - uses EntityNameId convention referencing LcfsPathway",
        "pattern": "^CA-[A-Z]{2,4}-[0-9]{4}-[A-Z]{3,4}-[0-9]{3}$"
      },
      "fuelVolume": {
        "type": "number",
        "minimum": 0,
        "description": "Volume of fuel in transaction for LCFS reporting"
      },
      "fuelVolumeUnit": {
        "type": "string",
        "enum": [
          "gallons",
          "liters",
          "GGE"
        ],
        "description": "Unit of measurement for fuel volume"
      },
      "fuelCategory": {
        "type": "string",
        "enum": [
          "gasoline",
          "diesel",
          "renewable_diesel",
          "biodiesel",
          "ethanol",
          "renewable_gasoline",
          "hydrogen",
          "electricity",
          "renewable_natural_gas",
          "sustainable_aviation_fuel"
        ],
        "description": "Category of fuel for LCFS classification"
      },
      "reportingPeriod": {
        "type": "string",
        "pattern": "^[0-9]{4}-Q[1-4]$",
        "description": "LCFS reporting quarter in YYYY-QN format"
      },
      "regulatedPartyRole": {
        "type": "string",
        "enum": [
          "producer",
          "importer",
          "blender",
          "distributor",
          "not_applicable"
        ],
        "description": "Role of regulated party in LCFS transaction"
      },
      "lastUpdated": {
        "type": "string",
        "format": "date-time",
        "description": "Timestamp of last modification"
      }
    },
    "required": [
      "@context",
      "@type",
      "@id",
      "transactionId",
      "OrganizationId",
      "CustomerId",
      "transactionDate",
      "contractValue",
      "contractCurrency",
      "transactionStatus"
    ],
    "title": "Transaction",
    "description": "Transaction entity in BOOST data model"
  }
}