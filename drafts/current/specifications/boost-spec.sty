% boost-spec-minimal.sty - Minimal LaTeX package for BOOST Specification
% Simplified version for PDF generation testing

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{boost-spec-minimal}[2025/08/12 v3.0.9 BOOST Specification Style Minimal]

% Required packages
\RequirePackage{xcolor}
\RequirePackage{tcolorbox}
\RequirePackage{hyperref}
\RequirePackage{amsmath}
\RequirePackage{amsfonts}
\RequirePackage{amssymb}
\RequirePackage{booktabs}
\RequirePackage{url}
\RequirePackage{longtable}
\RequirePackage{float}
\RequirePackage{fancyhdr}
\RequirePackage[utf8]{inputenc}
\RequirePackage{listings}
\RequirePackage{minted}
\RequirePackage[T1]{fontenc}
\RequirePackage{cmbright}  % Computer Modern Sans Serif font
\RequirePackage{textcomp}
\RequirePackage{makeidx}
\makeindex  % Enable indexing
\DeclareUnicodeCharacter{2265}{\ensuremath{\geq}}

% W3C Specification Colors
\definecolor{normative}{RGB}{0,100,0}
\definecolor{informative}{RGB}{0,0,150}
\definecolor{example}{RGB}{150,75,0}
\definecolor{warning}{RGB}{200,0,0}
\definecolor{reference}{RGB}{100,0,100}
\definecolor{w3cblue}{RGB}{0,90,156}

% BOOST thematic colors
\definecolor{coretraceability}{RGB}{76,175,80}
\definecolor{organizational}{RGB}{33,150,243}
\definecolor{materialsupply}{RGB}{121,85,72}
\definecolor{transaction}{RGB}{255,152,0}
\definecolor{sustainability}{RGB}{255,193,7}
\definecolor{geographic}{RGB}{156,39,176}
\definecolor{reporting}{RGB}{244,67,54}

% Minted configuration for syntax highlighting
\setminted{
    fontsize=\small,
    linenos=false,
    breaklines=true,
    breakanywhere=false,
    tabsize=2,
    autogobble=true,
    bgcolor=gray!5
}

% Enhanced listings configuration for better syntax highlighting
\lstdefinelanguage{JSON}{
    basicstyle=\ttfamily\footnotesize,
    numbers=left,
    numberstyle=\tiny\color{gray},
    stepnumber=1,
    numbersep=8pt,
    showstringspaces=false,
    breaklines=true,
    frame=lines,
    backgroundcolor=\color{example!5!white},
    rulecolor=\color{example!75!black}
}

\lstdefinestyle{jsonStyle}{
    language=JSON,
    basicstyle=\ttfamily\footnotesize,
    keywordstyle=\color{blue}\bfseries,
    stringstyle=\color{red},
    commentstyle=\color{green}\itshape,
    numbers=left,
    numberstyle=\tiny\color{gray},
    stepnumber=1,
    numbersep=8pt,
    tabsize=2,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    frame=leftline,
    framerule=2pt,
    rulecolor=\color{example!75!black},
    backgroundcolor=\color{example!5!white},
    breaklines=true,
    breakatwhitespace=false,
    escapeinside={(*@}{@*)}
}

% Custom environments
\newtcolorbox{normative}[1][]{
    colback=normative!5!white,
    colframe=normative!75!black,
    title={\textbf{Normative Section}},
    #1
}

\newtcolorbox{informative}[1][]{
    colback=informative!5!white,
    colframe=informative!75!black,
    title={\textbf{Informative Section}},
    #1
}

\newtcolorbox{examplebox}[1][]{
    colback=example!5!white,
    colframe=example!75!black,
    title={\textbf{Example}},
    #1
}

\newtcolorbox{important}[1][]{
    colback=warning!5!white,
    colframe=warning!75!black,
    title={\textbf{Important}},
    #1
}

% RFC 2119 keyword formatting
\newcommand{\rfc}[1]{\textbf{\textsc{#1}}}
\newcommand{\MUST}{\rfc{must}}
\newcommand{\MUSTNOT}{\rfc{must not}}
\newcommand{\REQUIRED}{\rfc{required}}
\newcommand{\SHALL}{\rfc{shall}}
\newcommand{\SHALLNOT}{\rfc{shall not}}
\newcommand{\SHOULD}{\rfc{should}}
\newcommand{\SHOULDNOT}{\rfc{should not}}
\newcommand{\RECOMMENDED}{\rfc{recommended}}
\newcommand{\MAY}{\rfc{may}}
\newcommand{\OPTIONAL}{\rfc{optional}}

% Entity formatting
\newcommand{\entity}[1]{\texttt{#1}}
\newcommand{\field}[1]{\texttt{#1}}
\newcommand{\enum}[1]{\texttt{#1}}
\newcommand{\TRU}{\entity{TraceableUnit}}

% Simple W3C Specification metadata commands
% These commands are not used in this minimal implementation
% All metadata is hardcoded in \makew3ctitle command

% Cross-reference formatting
\newcommand{\secref}[1]{Section~\ref{#1}}
\newcommand{\figref}[1]{Figure~\ref{#1}}
\newcommand{\tabref}[1]{Table~\ref{#1}}
\newcommand{\appref}[1]{Appendix~\ref{#1}}

% Original JSON example environment (keep for backwards compatibility)
\newtcolorbox{jsonexample}[2][]{
    colback=example!5!white,
    colframe=example!75!black,
    title={\textbf{JSON Example: #2}},
    fonttitle=\bfseries,
    left=8pt,
    right=8pt,
    top=8pt,
    bottom=8pt,
    boxrule=0.8pt,
    #1
}

% Enhanced code listing environments using listings package
\newenvironment{codeblock}[2][]{
    \begin{tcolorbox}[colback=gray!5!white,colframe=gray!75!black,title={\textbf{#2}},fonttitle=\bfseries]
    \begin{lstlisting}[#1]
}{
    \end{lstlisting}
    \end{tcolorbox}
}

% JSON code command using minted for proper syntax highlighting
% This version handles the existing manually formatted JSON content
\newcommand{\jsoncode}[1]{%
    % First we need to write the content to a temporary file
    % and then use minted to display it with proper syntax highlighting
    \begingroup%
    \small%
    \ttfamily%
    \selectfont%
    \setlength{\baselineskip}{1.2\baselineskip}%
    \raggedright%
    \hyphenpenalty=10000%
    \exhyphenpenalty=10000%
    #1%
    \endgroup%
}

% New minted-based commands for proper syntax highlighting
\newcommand{\mintjson}[1]{%
    \begin{minted}[
        bgcolor=example!5!white,
        frame=leftline,
        framerule=2pt,
        rulecolor=example!75!black,
        fontsize=\small
    ]{json}
    #1
    \end{minted}
}

\newcommand{\mintpython}[1]{%
    \begin{minted}[
        bgcolor=normative!5!white,
        frame=leftline,
        framerule=2pt,
        rulecolor=normative!75!black,
        fontsize=\small,
        linenos=true
    ]{python}
    #1
    \end{minted}
}

% Inline code formatting commands  
\newcommand{\inlinejson}[1]{\texttt{\textcolor{example}{#1}}}
\newcommand{\inlinecode}[1]{\texttt{#1}}

% Python example environment with syntax highlighting
\newtcolorbox{pythonexample}[1]{
    enhanced,
    colback=normative!5!white,
    colframe=normative!75!black,
    title={\textbf{Python Example: #1}},
    fonttitle=\bfseries\color{white},
    coltitle=white,
    attach boxed title to top left={yshift=-2mm,xshift=2mm},
    boxed title style={colback=normative!75!black},
    breakable=true,
    before skip=10pt,
    after skip=10pt
}

% Python code command using minted for proper syntax highlighting
\newcommand{\pythoncode}[1]{%
    \begin{minted}[
        fontsize=\small,
        linenos=false,
        breaklines=true,
        breakanywhere=true
    ]{python}
#1
    \end{minted}%
}

% Inline code formatting command
\newcommand{\code}[1]{\texttt{#1}}

% Thematic area formatting
\newcommand{\coretraceability}[1]{\textcolor{coretraceability}{\textbf{#1}}}
\newcommand{\organizational}[1]{\textcolor{organizational}{\textbf{#1}}}
\newcommand{\materialsupply}[1]{\textcolor{materialsupply}{\textbf{#1}}}
\newcommand{\transaction}[1]{\textcolor{transaction}{\textbf{#1}}}
\newcommand{\sustainability}[1]{\textcolor{sustainability}{\textbf{#1}}}
\newcommand{\geographic}[1]{\textcolor{geographic}{\textbf{#1}}}
\newcommand{\reporting}[1]{\textcolor{reporting}{\textbf{#1}}}

% Entity definition table environment
\newenvironment{entitytable}[1]{%
    \begin{table}[H]
    \centering
    \caption{Entity Definition: #1}
    \begin{tabular}{@{}lp{0.3\textwidth}p{0.4\textwidth}@{}}
    \toprule
    \textbf{Field} & \textbf{Type} & \textbf{Description} \\
    \midrule
}{%
    \bottomrule
    \end{tabular}
    \end{table}
}

% W3C Status environment
\newenvironment{w3cstatus}{%
    \begin{informative}[title=Status of This Document]
}{%
    \end{informative}
}

% W3C title page command - simple approach
\newcommand{\boosttitle}{%
    \begin{titlepage}
    \centering
    \vspace*{2cm}
    {\huge\bfseries Biomass Open Origin Standard for Tracking (BOOST) \par}
    \vspace{1cm}
    {\Large W3C Community Group Final Specification \par}
    \vspace{0.5cm}
    {\large Version 3.0.4 \par}
    \vspace{0.5cm}
    {\large August 12, 2025 \par}
    \vspace{2cm}
    {\large Peter Tittmann \par}
    \vspace{0.5cm}
    {\large BOOST W3C Community Group \par}
    \vfill
    \end{titlepage}
}

% Create alias for compatibility
\let\makewthreectitle\boosttitle

% RFC 2119 keyword commands that might be missing
\newcommand{\NOTRECOMMENDED}{\rfc{not recommended}}

\endinput