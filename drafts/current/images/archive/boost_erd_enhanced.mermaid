erDiagram
    %% BOOST Enhanced Biomass Chain of Custody ERD
    %% Beautiful styling with color-coded entity groups and enhanced visual hierarchy
    %% Created: 2025-07-03
    
    %% ===========================================
    %% CORE ORGANIZATION & CERTIFICATION CLUSTER
    %% ===========================================
    
    Organization {
        string organizationId PK "ğŸ¢ Unique organization identifier"
        string name "ğŸ“› Legal entity name"
        string address "ğŸ“ Business address"
        string role "ğŸ”„ BP, Trader, Energy Producer"
        string scopeOfOperations "ğŸŒ Geographic/operational scope"
        string legalEntityStatus "âš–ï¸ Legal registration status"
        string certificateCode FK "ğŸ“œ Certificate reference"
        string contactInfo "ğŸ“ Contact details"
        string lcfsRegistrationId "ğŸŒ± LCFS system entity ID"
        string regulatedEntityType "ğŸ›ï¸ producer, importer, blender, distributor"
    }
    
    CertificationScheme {
        string schemeId PK "ğŸ¯ Unique scheme identifier"
        string schemeName "ğŸ“‹ FSC, SFI, PEFC, LCFS"
        string recognitionStatus "âœ… International recognition"
        string versionNumber "ğŸ”¢ Scheme version"
        string description "ğŸ“„ Scheme overview"
        uri website "ğŸŒ Official website"
        string[] materialCategories "ğŸŒ¿ Tracked material types"
        string[] controlSystems "âš™ï¸ Control mechanisms"
        string labelUseRequirements "ğŸ·ï¸ Labeling rules"
        string volumeTrackingRequirements "ğŸ“Š Volume tracking rules"
        string dueDiligenceRequirements "ğŸ” Due diligence rules"
        string[] sustainabilityCriteria "ğŸŒ± Sustainability metrics"
        string[] applicableRegions "ğŸ—ºï¸ Geographic coverage"
        date dateEstablished "ğŸ“… Establishment date"
        datetime lastUpdated "ğŸ”„ Last modification"
    }
    
    Certificate {
        string certificateNumber PK "ğŸ“œ Certificate number"
        string certificateId "ğŸ†” Certificate identifier"
        date dateOfIssue "ğŸ“… Issue date"
        date dateOfExpiry "â° Expiry date"
        string scopeOfCertification "ğŸ“‹ Certification scope"
        string status "ğŸ”„ active, suspended, expired"
        string versionNumber "ğŸ”¢ Certificate version"
        string cbId FK "ğŸ›ï¸ Certification body"
        string organizationId FK "ğŸ¢ Certified organization"
        string certificationSchemeId FK "ğŸ“‹ Certification scheme"
        datetime lastUpdated "ğŸ”„ Last update"
    }
    
    CertificationBody {
        string cbId PK "ğŸ›ï¸ Certification body ID"
        string cbName "ğŸ“› Certification body name"
        string accreditationStatus "âœ… Accredited status"
        string accreditationScope "ğŸ“‹ Accreditation scope"
        string contactInformation "ğŸ“ Contact details"
        string[] jurisdictions "ğŸ—ºï¸ Operating regions"
        string[] sectorsServed "ğŸ­ Industry sectors"
        boolean isActive "ğŸ”„ Active status"
        datetime lastUpdated "ğŸ”„ Last update"
    }
    
    %% ===========================================
    %% SUPPLY CHAIN & MATERIALS CLUSTER
    %% ===========================================
    
    Material {
        string materialId PK "ğŸŒ¿ Material identifier"
        string materialType "ğŸ·ï¸ Material classification"
        string description "ğŸ“ Material description"
        string specification "ğŸ“Š Technical specifications"
        string origin "ğŸ“ Source location"
        decimal quantity "ğŸ“¦ Material quantity"
        string unit "ğŸ“ Measurement unit"
        string supplier "ğŸ­ Supplier information"
        datetime lastUpdated "ğŸ”„ Last update"
    }
    
    Supplier {
        string supplierId PK "ğŸ­ Supplier identifier"
        string name "ğŸ“› Supplier name"
        string address "ğŸ“ Supplier address"
        string supplierType "ğŸ·ï¸ Supplier category"
        string materialCategory "ğŸŒ¿ Supplied materials"
        string contactInfo "ğŸ“ Contact information"
        string sustainabilityRating "â­ Sustainability score"
        datetime lastUpdated "ğŸ”„ Last update"
    }
    
    Customer {
        string customerId PK "ğŸ›’ Customer identifier"
        string name "ğŸ“› Customer name"
        string address "ğŸ“ Customer address"
        string customerType "ğŸ·ï¸ Customer category"
        string contactInfo "ğŸ“ Contact information"
        datetime lastUpdated "ğŸ”„ Last update"
    }
    
    %% ===========================================
    %% TRANSACTION & BATCH PROCESSING CLUSTER
    %% ===========================================
    
    Transaction {
        string transactionId PK "ğŸ’± Transaction identifier"
        string supplyingOrganizationId FK "ğŸ­ Supplier organization"
        string customerOrganizationId FK "ğŸ›’ Customer organization"
        string transactionType "ğŸ”„ Transaction category"
        decimal quantity "ğŸ“¦ Transaction quantity"
        string unit "ğŸ“ Measurement unit"
        date transactionDate "ğŸ“… Transaction date"
        string fuelVolume "â›½ Fuel volume (LCFS)"
        string fuelVolumeUnit "ğŸ“ Fuel unit (LCFS)"
        string fuelCategory "ğŸ·ï¸ Fuel type (LCFS)"
        string reportingPeriod "ğŸ“Š Reporting period (LCFS)"
        string lcfsPathwayId FK "ğŸ›£ï¸ LCFS pathway (LCFS)"
        string regulatedPartyRole "ğŸ›ï¸ Party role (LCFS)"
        datetime lastUpdated "ğŸ”„ Last update"
    }
    
    TransactionBatch {
        string batchId PK "ğŸ“¦ Batch identifier"
        string transactionId FK "ğŸ’± Parent transaction"
        decimal quantity "ğŸ“Š Batch quantity"
        string unit "ğŸ“ Measurement unit"
        string materialType "ğŸŒ¿ Material type"
        string claimPercentage "ğŸ“ˆ Claim percentage"
        datetime lastUpdated "ğŸ”„ Last update"
    }
    
    SalesDeliveryDocument {
        string documentId PK "ğŸ“„ Document identifier"
        string transactionId FK "ğŸ’± Related transaction"
        string documentType "ğŸ·ï¸ Document category"
        string documentUrl "ğŸ”— Document location"
        date deliveryDate "ğŸšš Delivery date"
        string deliveryLocation "ğŸ“ Delivery address"
        datetime lastUpdated "ğŸ”„ Last update"
    }
    
    %% ===========================================
    %% CLAIMS & VERIFICATION CLUSTER
    %% ===========================================
    
    Claim {
        string claimId PK "ğŸ† Claim identifier"
        string claimType "ğŸ·ï¸ Claim category"
        string claimValue "ğŸ“Š Claim value"
        string certificationSchemeId FK "ğŸ“‹ Certification scheme"
        string materialType "ğŸŒ¿ Material type"
        decimal claimPercentage "ğŸ“ˆ Claim percentage"
        datetime lastUpdated "ğŸ”„ Last update"
    }
    
    VerificationStatement {
        string verificationId PK "âœ… Verification identifier"
        string verifierId "ğŸ” Verifier identifier"
        string verificationScope "ğŸ“‹ Verification scope"
        date verificationDate "ğŸ“… Verification date"
        string verificationResult "ğŸ† Verification outcome"
        string reportUrl "ğŸ”— Report location"
        datetime lastUpdated "ğŸ”„ Last update"
    }
    
    Audit {
        string auditId PK "ğŸ” Audit identifier"
        string auditType "ğŸ·ï¸ Audit category"
        string auditScope "ğŸ“‹ Audit scope"
        date auditDate "ğŸ“… Audit date"
        string auditResult "ğŸ† Audit outcome"
        string auditorId "ğŸ‘¤ Auditor identifier"
        string reportUrl "ğŸ”— Report location"
        datetime lastUpdated "ğŸ”„ Last update"
    }
    
    %% ===========================================
    %% CARBON & ENERGY DATA CLUSTER
    %% ===========================================
    
    EnergyCarbonData {
        string energyCarbonDataId PK "âš¡ Energy/carbon data ID"
        string dataCategory "ğŸ·ï¸ carbon_intensity, energy_content, emissions"
        decimal value "ğŸ“Š Measured value"
        string unit "ğŸ“ gCO2e/MJ, MJ/kg, etc."
        string source "ğŸ“š Data source"
        string measurementMethod "ğŸ”¬ CA-GREET3.0, GREET2023"
        string lcfsPathwayType "ğŸ›£ï¸ Lookup_Table, Tier_1, Tier_2"
        decimal energyEconomyRatio "âš™ï¸ LCFS efficiency multiplier"
        string lifeCycleStage "ğŸ”„ feedstock, production, transport"
        decimal regulatoryBenchmark "ğŸ“ Regulatory comparison value"
        datetime lastUpdated "ğŸ”„ Last update"
    }
    
    %% ===========================================
    %% MASS BALANCE & PRODUCT TRACKING CLUSTER
    %% ===========================================
    
    MassBalanceAccount {
        string accountId PK "âš–ï¸ Account identifier"
        string organizationId FK "ğŸ¢ Organization"
        string accountType "ğŸ·ï¸ Account category"
        string materialCategory "ğŸŒ¿ Material type"
        decimal inputVolume "ğŸ“¥ Input quantity"
        decimal outputVolume "ğŸ“¤ Output quantity"
        decimal balance "âš–ï¸ Current balance"
        string reportingPeriod "ğŸ“Š Reporting period"
        datetime lastUpdated "ğŸ”„ Last update"
    }
    
    ProductGroup {
        string productGroupId PK "ğŸ“¦ Product group ID"
        string productGroupName "ğŸ“› Product group name"
        string description "ğŸ“ Group description"
        string[] materialTypes "ğŸŒ¿ Included materials"
        string trackingMethod "ğŸ“Š Tracking methodology"
        datetime lastUpdated "ğŸ”„ Last update"
    }
    
    SupplyBaseReport {
        string reportId PK "ğŸ“Š Report identifier"
        string organizationId FK "ğŸ¢ Reporting organization"
        string reportingPeriod "ğŸ“… Reporting period"
        string reportType "ğŸ·ï¸ Report category"
        string reportScope "ğŸ“‹ Report scope"
        string reportStatus "ğŸ”„ Report status"
        string reportUrl "ğŸ”— Report location"
        datetime lastUpdated "ğŸ”„ Last update"
    }
    
    %% ===========================================
    %% LCFS-SPECIFIC ENTITIES CLUSTER
    %% ===========================================
    
    LCFSPathway {
        string pathwayId PK "ğŸ›£ï¸ LCFS pathway identifier"
        string pathwayType "ğŸ·ï¸ Lookup_Table, Tier_1, Tier_2"
        string feedstockCategory "ğŸŒ¿ corn, sugarcane, forest_residue"
        string fuelProduct "â›½ ethanol, renewable_diesel, SAF"
        string facilityLocation "ğŸ“ Production facility"
        decimal carbonIntensity "ğŸ“Š gCO2e/MJ"
        decimal energyEconomyRatio "âš™ï¸ LCFS efficiency ratio"
        date certificationDate "ğŸ“… CARB certification date"
        date expirationDate "â° Pathway expiration"
        string verificationStatus "ğŸ”„ active, suspended, expired"
        string caGreetVersion "ğŸ”¬ CA-GREET model version"
        datetime lastUpdated "ğŸ”„ Last update"
    }
    
    LCFSReporting {
        string reportingId PK "ğŸ“Š LCFS reporting identifier"
        string regulatedEntityId FK "ğŸ›ï¸ Regulated organization"
        string reportingPeriod "ğŸ“… YYYY-QN format"
        decimal totalFuelVolume "â›½ Total fuel reported"
        decimal totalCreditsGenerated "ğŸ† Credits earned"
        decimal totalDeficitsIncurred "âŒ Deficits incurred"
        decimal netPosition "âš–ï¸ Net credits/deficits"
        string complianceStatus "ğŸ”„ compliant, deficit, pending"
        datetime submissionDate "ğŸ“¤ CARB submission date"
        datetime verificationDate "âœ… Verification date"
        datetime lastUpdated "ğŸ”„ Last update"
    }
    
    %% ===========================================
    %% ENTITY RELATIONSHIPS WITH ENHANCED STYLING
    %% ===========================================
    
    %% Core Certification Relationships
    Organization ||--o{ Certificate : "ğŸ¢ holds ğŸ“œ"
    Certificate }o--|| CertificationScheme : "ğŸ“œ certified against ğŸ“‹"
    Certificate }o--|| CertificationBody : "ğŸ“œ issued by ğŸ›ï¸"
    CertificationBody ||--o{ Audit : "ğŸ›ï¸ conducts ğŸ”"
    
    %% Supply Chain Flow
    Organization ||--o{ Material : "ğŸ¢ handles ğŸŒ¿"
    Organization ||--o{ Transaction : "ğŸ¢ creates ğŸ’±"
    Organization ||--o{ Supplier : "ğŸ¢ sources from ğŸ­"
    Organization ||--o{ Customer : "ğŸ¢ sells to ğŸ›’"
    Customer ||--o{ Transaction : "ğŸ›’ receives ğŸ’±"
    
    %% Transaction Processing
    Transaction ||--o{ TransactionBatch : "ğŸ’± contains ğŸ“¦"
    Transaction ||--|| SalesDeliveryDocument : "ğŸ’± documented by ğŸ“„"
    TransactionBatch ||--|| Claim : "ğŸ“¦ associated with ğŸ†"
    TransactionBatch ||--o{ VerificationStatement : "ğŸ“¦ verified by âœ…"
    
    %% Mass Balance Operations
    Organization ||--o{ MassBalanceAccount : "ğŸ¢ manages âš–ï¸"
    Organization ||--o{ ProductGroup : "ğŸ¢ defines ğŸ“¦"
    MassBalanceAccount }o--|| ProductGroup : "âš–ï¸ tracks ğŸ“¦"
    
    %% Energy & Carbon Tracking
    Material ||--o{ EnergyCarbonData : "ğŸŒ¿ characterized by âš¡"
    TransactionBatch ||--o{ EnergyCarbonData : "ğŸ“¦ associated with âš¡"
    
    %% Reporting & Compliance
    Organization ||--o{ SupplyBaseReport : "ğŸ¢ prepares ğŸ“Š"
    Audit }o--|| Organization : "ğŸ” audits ğŸ¢"
    
    %% LCFS-Specific Relationships
    Transaction }o--|| LCFSPathway : "ğŸ’± uses pathway ğŸ›£ï¸"
    LCFSPathway ||--o{ EnergyCarbonData : "ğŸ›£ï¸ has carbon data âš¡"
    Organization ||--o{ LCFSReporting : "ğŸ¢ submits ğŸ“Š"
    LCFSReporting ||--o{ Transaction : "ğŸ“Š includes ğŸ’±"
    LCFSPathway }o--|| Certificate : "ğŸ›£ï¸ certified by ğŸ“œ"

    %% ===========================================
    %% ENHANCED STYLING & COLOR THEMES
    %% ===========================================
    
    %%{init: {
        'theme': 'base',
        'themeVariables': {
            'primaryColor': '#e3f2fd',
            'primaryTextColor': '#0d47a1',
            'primaryBorderColor': '#1976d2',
            'lineColor': '#1976d2',
            'secondaryColor': '#fff3e0',
            'tertiaryColor': '#f3e5f5',
            'background': '#fafafa',
            'mainBkg': '#ffffff',
            'secondBkg': '#e8f5e8',
            'tertiaryBkg': '#fce4ec'
        }
    }}%%